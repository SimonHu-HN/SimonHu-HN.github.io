<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>Alorithm Cheat Sheet|算法Cheat Sheet | SimonHu's Blog</title>
  <meta name="author" content="SimonHu">
  
  <meta name="description" content="持续记录
Alorithm Cheat Sheet|算法Cheat Sheet技巧|Tricks

while(~scanf(&amp;quot;%d&amp;quot;, &amp;amp;n))
~是按位取反 scanf的返回值是输入值的个数 如果没有输入值就是返回-1 -1按位取反结果是0,即没有输入的时候退出循环

INF(最大值)设置
INF设为0x7fffffff：32-bit int的最大值，但是注意越界操作，且不能满足“无穷大加一个有穷的数依然是无穷大”条件
INF设为0x3f3f3f3f：多数情况下较为合理，它是很大的数，方便数组清零操作memset(a,0x3f,sizeof(a))，且满足无穷大加无穷大还是无穷大的条件


素数表生成|Prime number table
1234567891011121314151617181920212223void createprime(int n)&amp;#123;	int m = sqrt(n + 0.5);	memset(vis, 0, sizeof(vis));	vis[1] = 1;	for (int i = 2; i &amp;lt;= m; i++)	    if (!vis[i])		for (int j = i*i; j &amp;lt;= n; j += i)		     vis[j] = 1;&amp;#125;/*生成1到n的素数表，里面的循环是把非素数置为1，素数为0,1特殊对待，直接赋值为1，变为非素数*/bool isPrime_2(int num)&amp;#123;	if (num == 1)return 0;	int tmp = sqrt(num);	for (int i = 2; i &amp;lt;= tmp; i++)		if (num %i == 0)			return 0;	return 1;&amp;#125;/*素数判断，对1特殊对待*/

快速幂|Binary Exponentiation">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Alorithm Cheat Sheet|算法Cheat Sheet"/>
  <meta property="og:site_name" content="SimonHu"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-166336296-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-166336296-1');
</script>






<meta name="generator" content="Hexo 4.2.0"></head>

 <body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar">Menu</span>
      </button>
	  <a class="navbar-brand" href="/">Home</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 





	
		<div class="page-header">
			<h1> Alorithm Cheat Sheet|算法Cheat Sheet</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">
	  

	  <p><i class="fa fa-code blink-slow"></i><em>持续记录</em></p>
<h1 id="Alorithm-Cheat-Sheet-算法Cheat-Sheet"><a href="#Alorithm-Cheat-Sheet-算法Cheat-Sheet" class="headerlink" title="Alorithm Cheat Sheet|算法Cheat Sheet"></a>Alorithm Cheat Sheet|算法Cheat Sheet</h1><h3 id="技巧-Tricks"><a href="#技巧-Tricks" class="headerlink" title="技巧|Tricks"></a>技巧|Tricks</h3><hr>
<ul>
<li><p><code>while(~scanf(&quot;%d&quot;, &amp;n))</code></p>
<p><code>~</code>是按位取反 <code>scanf</code>的返回值是输入值的个数 如果没有输入值就是返回-1 -1按位取反结果是0,即没有输入的时候退出循环</p>
</li>
<li><p><code>INF</code>(最大值)设置</p>
<p>INF设为0x7fffffff：32-bit int的最大值，但是注意越界操作，且不能满足“无穷大加一个有穷的数依然是无穷大”条件</p>
<p>INF设为0x3f3f3f3f：多数情况下较为合理，它是很大的数，方便数组清零操作memset(a,0x3f,sizeof(a))，且满<em>足无穷大加无穷大还是无穷大</em>的条件</p>
</li>
</ul>
<h3 id="素数表生成-Prime-number-table"><a href="#素数表生成-Prime-number-table" class="headerlink" title="素数表生成|Prime number table"></a>素数表生成|Prime number table</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createprime</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> m = <span class="built_in">sqrt</span>(n + <span class="number">0.5</span>);</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">	vis[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= m; i++)</span><br><span class="line">	    <span class="keyword">if</span> (!vis[i])</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = i*i; j &lt;= n; j += i)</span><br><span class="line">		     vis[j] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*生成1到n的素数表，里面的循环是把非素数置为1，素数为0,1特殊对待，直接赋值为1，变为非素数*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isPrime_2</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (num == <span class="number">1</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> tmp = <span class="built_in">sqrt</span>(num);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= tmp; i++)</span><br><span class="line">		<span class="keyword">if</span> (num %i == <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*素数判断，对1特殊对待*/</span></span><br></pre></td></tr></table></figure>

<h3 id="快速幂-Binary-Exponentiation"><a href="#快速幂-Binary-Exponentiation" class="headerlink" title="快速幂|Binary Exponentiation"></a>快速幂|Binary Exponentiation</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fastPower</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> base = a;</span><br><span class="line">	<span class="keyword">while</span> (b != <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((b &amp; <span class="number">1</span>) != <span class="number">0</span>) &#123; <span class="comment">//如果当前的次幂数最后一位(二进制数)不为0的话，那么我们将当前权值加入到最后答案里面去</span></span><br><span class="line">			ans = ans * base;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//权值增加</span></span><br><span class="line">		base = base * base;</span><br><span class="line">		b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>, fastPower(<span class="number">3</span>, <span class="number">11</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*个人解析</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">为什么要快速幂？</span></span><br><span class="line"><span class="comment">更快的算出幂，由于一个指数肯定能够分解成二进制的形式，通过对二进制的最右边一位的判断，1则乘，否则则不乘</span></span><br><span class="line"><span class="comment">可以缩小计算次数，而且由于指数都被分解为2的i次方，所以权值可以通过累乘来记录，比如2^4 2^8 2^16都可以由前者乘以前者来得到。当遇到二进制上的1时候再乘就可以得到正确的答案。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">快速幂是根据指数转为二进制，在二进制遇到1的地方对答案进行累乘，也即是在这个时候相当于乘1，所以基础</span></span><br><span class="line"><span class="comment">权值要不断的乘自己，来保证正确性。</span></span><br><span class="line"><span class="comment">例如3^11</span></span><br><span class="line"><span class="comment">由于任何数的零次方都是1，所以ans一开始为1</span></span><br><span class="line"><span class="comment">3^1*3^2*3^8  1 2 8想到二进制 3的1次方就是基础值乘3 1*3 (3^2=3^1*3^1) (3^4=3^2*3^2) (3^8=3^4*3^4)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">11=1101</span></span><br><span class="line"><span class="comment">分为2^3+2^1+2^0 基础权值为3，一开始0位上有1，所以初始答案1要乘以当前的权值，所以ans*base=3 base为9</span></span><br><span class="line"><span class="comment">这个时候要计算第1位的权值了，，发现此时1位上也为1，所以ans*base=3*9=27 base为81（9*9）</span></span><br><span class="line"><span class="comment">计算第2位，，此时位置上为0，不乘,81*81=6561</span></span><br><span class="line"><span class="comment">最后一位，此时位置上有1,ans*base=27*6561=177147</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="伪丑数-Pseudo-ugly-number"><a href="#伪丑数-Pseudo-ugly-number" class="headerlink" title="伪丑数|Pseudo ugly number"></a>伪丑数|Pseudo ugly number</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> N = <span class="number">5842</span>;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">long</span>  [] humble = <span class="keyword">new</span> <span class="keyword">long</span> [N+<span class="number">5</span>];</span><br><span class="line">    </span><br><span class="line"><span class="comment">//    static int [] l = new int [N];</span></span><br><span class="line"><span class="comment">//    static int [] r= new int [N];</span></span><br><span class="line"><span class="comment">//    static float per[]=new float [N+1];</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Scanner in = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> BufferedInputStream(System.in));</span><br><span class="line">        humble[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> p2,p3,p5,p7;</span><br><span class="line">        p2=p3=p5=p7=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;=N)</span><br><span class="line">        &#123;</span><br><span class="line">            i++;</span><br><span class="line">            humble[i]=Math.min(Math.min(humble[p2]*<span class="number">2</span>, humble[p3]*<span class="number">3</span>),Math.min(humble[p5]*<span class="number">5</span>, humble[p7]*<span class="number">7</span>));</span><br><span class="line">            <span class="keyword">if</span>(humble[i]==humble[p2]*<span class="number">2</span>)</span><br><span class="line">                p2++;</span><br><span class="line">            <span class="keyword">if</span>(humble[i]==humble[p3]*<span class="number">3</span>)</span><br><span class="line">                p3++;</span><br><span class="line">            <span class="keyword">if</span>(humble[i]==humble[p5]*<span class="number">5</span>)</span><br><span class="line">                p5++;</span><br><span class="line">            <span class="keyword">if</span>(humble[i]==humble[p7]*<span class="number">7</span>)</span><br><span class="line">                p7++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(in.hasNext())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> n=in.nextInt();</span><br><span class="line">            <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(n%<span class="number">10</span>==<span class="number">1</span>&amp;&amp;n%<span class="number">100</span>!=<span class="number">11</span>)</span><br><span class="line">                    System.out.println(<span class="string">"The "</span>+n+<span class="string">"st humble number is "</span>+humble[n]+<span class="string">"."</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(n%<span class="number">10</span>==<span class="number">2</span>&amp;&amp;n%<span class="number">100</span>!=<span class="number">12</span>)</span><br><span class="line">                    System.out.println(<span class="string">"The "</span>+n+<span class="string">"nd humble number is "</span>+humble[n]+<span class="string">"."</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(n%<span class="number">10</span>==<span class="number">3</span>&amp;&amp;n%<span class="number">100</span>!=<span class="number">13</span>)</span><br><span class="line">                    System.out.println(<span class="string">"The "</span>+n+<span class="string">"rd humble number is "</span>+humble[n]+<span class="string">"."</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    System.out.println(<span class="string">"The "</span>+n+<span class="string">"th humble number is "</span>+humble[n]+<span class="string">"."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="相邻图形面积问题-Adjacent-Graphics-Area"><a href="#相邻图形面积问题-Adjacent-Graphics-Area" class="headerlink" title="相邻图形面积问题|Adjacent Graphics Area"></a>相邻图形面积问题|Adjacent Graphics Area</h3><p><img src="https://raw.githubusercontent.com/SimonHu-HN/GoPic_Private/master/img/image-20201027165335069.png" alt="image-20201027165335069"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*解法的核心在于考虑了直方图两个相邻长方形AB之间的关系。如果前一个长方形A低后一个长方形B高，则A肯定不会是某个大长方形的终点，因为我们可以安全地在A后面添加更高的B，使大长方形的宽度加1。如果A高B低，则A是可能的终点，假设我们就用A当做终点，并且以该长方形的高度当做大长方形的高度，看看可以往前延伸多长。根据上面这两条性质，我们可以维护一个递增序列（实际为非递减，当前后两个长方形的高度一样时，前一个长方形同样也不可能是终点，在此为了解释方便假定前后高度都不一样），*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> N = <span class="number">100010</span>;<span class="comment">//</span></span><br><span class="line"><span class="comment">//	static float [] dp = new float [N];</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> [] height = <span class="keyword">new</span> <span class="keyword">int</span> [N];</span><br><span class="line"><span class="comment">//	static float per[]=new float [N+1];</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		Scanner in = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> BufferedInputStream(System.in));</span><br><span class="line">		Stack&lt;Integer&gt; stk = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">		<span class="keyword">int</span> i,j,res;</span><br><span class="line">		<span class="keyword">while</span>(in.hasNext())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> sum=in.nextInt();</span><br><span class="line">			<span class="keyword">if</span>(sum==<span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				stk.removeAllElements();</span><br><span class="line">				<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=sum;i++)</span><br><span class="line">				&#123;</span><br><span class="line">					height[i]=in.nextInt();</span><br><span class="line">				&#125;</span><br><span class="line">				height[sum+<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">				res=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=sum;i++)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">if</span>(stk.isEmpty()||height[stk.peek()]&lt;=height[i])</span><br><span class="line">						stk.push(i);</span><br><span class="line">					<span class="keyword">else</span> &#123;</span><br><span class="line">						<span class="keyword">int</span> temp=stk.pop();</span><br><span class="line">						res=Math.max(res, height[temp]*(stk.isEmpty()?i-<span class="number">1</span>:i-stk.peek()-<span class="number">1</span>));</span><br><span class="line">						--i;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(res);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="皇后问题-N-queen"><a href="#皇后问题-N-queen" class="headerlink" title="皇后问题|N-queen"></a>皇后问题|N-queen</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;  </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;  </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;  </span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">5</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">1</span>,g;</span><br><span class="line">	a[i] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		g = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> k = i - <span class="number">1</span>; k &gt;= <span class="number">1</span>; k--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (a[k] == a[i] || <span class="built_in">abs</span>(a[i] - a[k]) == i - k)</span><br><span class="line">				g = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (g&amp;&amp;i == <span class="number">4</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sum++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (i &lt; <span class="number">4</span> &amp;&amp; g) &#123; i++; a[i] = <span class="number">1</span>; <span class="keyword">continue</span>; &#125;</span><br><span class="line">		<span class="keyword">while</span> (a[i] == <span class="number">4</span> &amp;&amp; i &gt; <span class="number">1</span>) i--;</span><br><span class="line">		<span class="keyword">if</span> (a[i] == <span class="number">4</span> &amp;&amp; i == <span class="number">1</span>)<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">else</span> a[i]++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>, sum);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="矩阵快速幂-Matrix-fast-power"><a href="#矩阵快速幂-Matrix-fast-power" class="headerlink" title="矩阵快速幂|Matrix fast power"></a>矩阵快速幂|Matrix fast power</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">问题描述</span></span><br><span class="line"><span class="comment">　　已知递推公式：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">　　F(n, 1)=F(n-1, 2) + 2F(n-3, 1) + 5,</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">　　F(n, 2)=F(n-1, 1) + 3F(n-3, 1) + 2F(n-3, 2) + 3.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">　　初始值为：F(1, 1)=2, F(1, 2)=3, F(2, 1)=1, F(2, 2)=4, F(3, 1)=6, F(3, 2)=5。</span></span><br><span class="line"><span class="comment">　　输入n，输出F(n, 1)和F(n, 2)，由于答案可能很大，你只需要输出答案除以99999999的余数。</span></span><br><span class="line"><span class="comment">输入格式</span></span><br><span class="line"><span class="comment">　　输入第一行包含一个整数n。</span></span><br><span class="line"><span class="comment">输出格式</span></span><br><span class="line"><span class="comment">　　输出两行，第一行为F(n, 1)除以99999999的余数，第二行为F(n, 2)除以99999999的余数。</span></span><br><span class="line"><span class="comment">样例输入</span></span><br><span class="line"><span class="comment">4</span></span><br><span class="line"><span class="comment">样例输出</span></span><br><span class="line"><span class="comment">14</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">21</span></span><br><span class="line"><span class="comment">数据规模和约定</span></span><br><span class="line"><span class="comment">　　1&lt;=n&lt;=10^18</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;  </span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;  </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;  </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">99999999</span>;  </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">matrix</span>  </span></span><br><span class="line"><span class="class">&#123;</span>  </span><br><span class="line">    ll a[<span class="number">8</span>][<span class="number">8</span>];  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function">matrix <span class="title">multiply</span><span class="params">(matrix x,matrix y,<span class="keyword">int</span> m,<span class="keyword">int</span> n,<span class="keyword">int</span> s)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    matrix tmp;  </span><br><span class="line">    <span class="built_in">memset</span>(tmp.a,<span class="number">0</span>,<span class="keyword">sizeof</span>(tmp.a));  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;  </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;s;k++)&#123;  </span><br><span class="line">                tmp.a[i][j]=(tmp.a[i][j] + (x.a[i][k] * y.a[k][j])%mod)%mod;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> tmp;  </span><br><span class="line">&#125;  </span><br><span class="line">matrix tmp=&#123;  </span><br><span class="line">                <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,  </span><br><span class="line">                <span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,  </span><br><span class="line">                <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,  </span><br><span class="line">                <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,  </span><br><span class="line">                <span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,  </span><br><span class="line">                <span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,  </span><br><span class="line">                <span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,  </span><br><span class="line">                <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>  </span><br><span class="line">            &#125;;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line">    matrix res;  </span><br><span class="line">    ll f[<span class="number">8</span>]=&#123;<span class="number">6</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">3</span>&#125;;  <span class="comment">//由f(n-1,1),f(n-1),2......f(n-3,1)..</span></span><br><span class="line">								<span class="comment">//假设n=4，则比例为f(3,1)....f(1,2)，比例则为651423，最后两个常数5,3</span></span><br><span class="line">    ll sum1,sum2,n;  </span><br><span class="line">    <span class="built_in">memset</span>(res.a,<span class="number">0</span>,<span class="keyword">sizeof</span>(res.a));  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)&#123;  </span><br><span class="line">        res.a[i][i]=<span class="number">1</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;  </span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>)  </span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"2"</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"3"</span>&lt;&lt;<span class="built_in">endl</span>;  </span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">2</span>)  </span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"1"</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"4"</span>&lt;&lt;<span class="built_in">endl</span>;  </span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">3</span>)  </span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"6"</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"5"</span>&lt;&lt;<span class="built_in">endl</span>;  </span><br><span class="line">    <span class="keyword">if</span>(n&gt;=<span class="number">4</span>)&#123;  </span><br><span class="line">        n-=<span class="number">3</span>;  </span><br><span class="line">        <span class="keyword">while</span>(n) <span class="comment">//矩阵快速幂   </span></span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="keyword">if</span>(n&amp;<span class="number">1</span>) res=multiply(res,tmp,<span class="number">8</span>,<span class="number">8</span>,<span class="number">8</span>);  </span><br><span class="line"><span class="comment">//&amp;是位与操作符，n&amp;1,不将n的二进制形式与00000000 00000001按位做与操作。这时，只							 //要//n的最右边一位是1，结果就不是0，为true，条件成立。所以这句话实际上就是if(n%2==1)</span></span><br><span class="line">            n&gt;&gt;=<span class="number">1</span>;  </span><br><span class="line">            tmp=multiply(tmp,tmp,<span class="number">8</span>,<span class="number">8</span>,<span class="number">8</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        sum1=<span class="number">0</span>;  </span><br><span class="line">        sum2=<span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)  </span><br><span class="line">        &#123;  </span><br><span class="line">            sum1=(sum1+(f[i]*res.a[i][<span class="number">0</span>])%mod)%mod;  </span><br><span class="line">            sum2=(sum2+(f[i]*res.a[i][<span class="number">1</span>])%mod)%mod;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;sum1&lt;&lt;<span class="built_in">endl</span>;  </span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;sum2&lt;&lt;<span class="built_in">endl</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="动态规划-Dynamic-Planning"><a href="#动态规划-Dynamic-Planning" class="headerlink" title="动态规划|Dynamic Planning"></a>动态规划|Dynamic Planning</h3><h4 id="01背包-01-Pack"><a href="#01背包-01-Pack" class="headerlink" title="01背包|01 Pack"></a>01背包|01 Pack</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//背包问题：有m件物品和一个承重为t的背包。第i件物品的重量是w[i]，价值是v[i]。</span></span><br><span class="line"><span class="comment">//求解将哪些物品装入背包可使这些物品的重量总和不超过背包承重量t，且价值总和最大。</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;conio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> f[<span class="number">1010</span>],w[<span class="number">1010</span>],v[<span class="number">1010</span>];<span class="comment">//f记录不同承重量背包的总价值，w记录不同物品的重量，v记录不同物品的价值</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="comment">//返回x,y的最大值</span></span><br><span class="line">    <span class="keyword">if</span>(x&gt;y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t,m,i,j;</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="keyword">sizeof</span>(f));  <span class="comment">//总价值初始化为0</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;t,&amp;m);  <span class="comment">//输入背包承重量t、物品的数目m</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;w[i],&amp;v[i]);  <span class="comment">//输入m组物品的重量w[i]和价值v[i]</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++)&#123;  <span class="comment">//尝试放置每一个物品</span></span><br><span class="line">        <span class="keyword">for</span>(j=t;j&gt;=w[i];j--)&#123;</span><br><span class="line">            f[j]=<span class="built_in">max</span>(f[j-w[i]]+v[i],f[j]);</span><br><span class="line">            <span class="comment">//在放入第i个物品前后，检验不同j承重量背包的总价值，如果放入第i个物品后比放入前的价值提高了，则修改j承重量背包的价值，否则不变</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>,f[t]);  <span class="comment">//输出承重量为t的背包的总价值</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="多重背包-Multiple-Pack"><a href="#多重背包-Multiple-Pack" class="headerlink" title="多重背包|Multiple Pack"></a>多重背包|Multiple Pack</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">102</span>];</span><br><span class="line"><span class="keyword">int</span> p[<span class="number">102</span>],h[<span class="number">102</span>],c[<span class="number">102</span>];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">comback</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span><span class="comment">//经费，重量。完全背包；</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=v; i&lt;=n; i++)</span><br><span class="line">        <span class="keyword">if</span>(dp[i]&lt;dp[i-v]+w)</span><br><span class="line">            dp[i]=dp[i-v]+w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">oneback</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span><span class="comment">//经费，重量；01背包；</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&gt;=v; i--)</span><br><span class="line">        <span class="keyword">if</span>(dp[i]&lt;dp[i-v]+w)</span><br><span class="line">            dp[i]=dp[i-v]+w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ncase,i,j,k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;ncase);</span><br><span class="line">    <span class="keyword">while</span>(ncase--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);<span class="comment">//经费，种类；</span></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;p[i],&amp;h[i],&amp;c[i]);<span class="comment">//价值，重量，数量;</span></span><br><span class="line">            <span class="keyword">if</span>(p[i]*c[i]&gt;=n) comback(p[i],h[i]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(j=<span class="number">1</span>; j&lt;c[i]; j&lt;&lt;<span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    oneback(j*p[i],j*h[i]);</span><br><span class="line">                    c[i]=c[i]-j;</span><br><span class="line">                &#125;</span><br><span class="line">                oneback(p[i]*c[i],h[i]*c[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[n]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="速记-note"><a href="#速记-note" class="headerlink" title="速记|note"></a>速记|note</h4><p>完全背包:在当前体积下，是否要放入或者再放入一个当前物品i</p>
<p>01背包: 在当前体积下，是否要放入当前物品i</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">我们在做0-1背包，计算dp[i][j]的时候，需要用到前面的值，而这个值是前i-1个物品的值（相当于更新前i-1个物品的值）.</span><br><span class="line">  </span><br><span class="line">做完全背包，计算dp[j]时，我们需要更新的是当前状态，也就是前i个物品的值.(也就是说：用前i-1个的值和当前值比较，更新当前值).</span><br><span class="line">  </span><br><span class="line">可以这样理解:01背包是基于前一个物品的角度上考虑，考虑他是否需要放入当前的物品，</span><br><span class="line">而由于当前的物品只有一个，又因为我们要参考前一个背包的状态，故而需要倒序。</span><br><span class="line">0-1背包问题的状态转移方程是：f[i][j] &#x3D; max(f[i-1][j], f[i-1][j - weight[i]] + value[i])</span><br><span class="line">如果不是倒序，循环到后面的时候，参考前面的状态时就可能有当前物品的参与了，而当前物品只有一次，所以这样是不合理的。</span><br><span class="line"></span><br><span class="line">而完全背包，有无限种可选，也即是，并非我这次选了，前面的就绝不可能一次没选过（可能选过，也可能没选），</span><br><span class="line">因而基于前面的状态也就没有意义了，那么就基于当前的状态来考虑，比如拿一次当前的物品，</span><br><span class="line">再拿一次当前的物品，等等等等。每次发生变化后都进行比较更新。</span><br></pre></td></tr></table></figure>

<h4 id="概率DP"><a href="#概率DP" class="headerlink" title="概率DP"></a>概率DP</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> N = <span class="number">50005</span>;<span class="comment">//</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">double</span> [] dp = <span class="keyword">new</span> <span class="keyword">double</span> [N];</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> [] value = <span class="keyword">new</span> <span class="keyword">int</span> [N];</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">double</span> [] per = <span class="keyword">new</span> <span class="keyword">double</span> [N];</span><br><span class="line"><span class="comment">//	static double per[]=new double [N+1];</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		Scanner in = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> BufferedInputStream(System.in));</span><br><span class="line">		<span class="keyword">int</span> times = in.nextInt();</span><br><span class="line">		<span class="keyword">while</span>(times!=<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> i,j;</span><br><span class="line">			<span class="keyword">int</span> max=<span class="number">0</span>;</span><br><span class="line">			Arrays.fill(value, <span class="number">0</span>);</span><br><span class="line">			Arrays.fill(per, <span class="number">0.0</span>);</span><br><span class="line">			Arrays.fill(dp, <span class="number">0.0</span>);</span><br><span class="line">			dp[<span class="number">0</span>]=<span class="number">1.0</span>;</span><br><span class="line">			<span class="keyword">double</span> p = in.nextDouble();</span><br><span class="line">			p=<span class="number">1.0</span>-p;</span><br><span class="line">			<span class="keyword">int</span> sum = in.nextInt();</span><br><span class="line">			<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=sum;i++)</span><br><span class="line">			&#123;</span><br><span class="line">				value[i]=in.nextInt();</span><br><span class="line">				max+=value[i];</span><br><span class="line">				per[i]=in.nextDouble();</span><br><span class="line">				per[i]=<span class="number">1.0</span>-per[i];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">/*动态方程变化 多抢一个银行，其钱数必将转化为概率的乘积，所以动态方程也要做出改变。</span></span><br><span class="line"><span class="comment">			 最后遍历，剩余的钱数越多，说明所抢的钱数越少，</span></span><br><span class="line"><span class="comment">			 逃跑几率越大。所以从大到小遍历背包容量，</span></span><br><span class="line"><span class="comment">			 一旦大于p，即为最大概率跳出。*/</span></span><br><span class="line">			<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=sum;i++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span>(j=max;j&gt;=value[i];j--)</span><br><span class="line">					dp[j]=Math.max(dp[j], dp[j-value[i]]*per[i]);</span><br><span class="line">					<span class="comment">/*使用钱数作为背包容量，通过1-p，即使用逃脱率，连续抢劫，逃脱率相乘则下降，这样才符合逻辑*/</span></span><br><span class="line">					<span class="comment">/*如，被抓率0.3,0.2抢劫两个为0.06，抢劫的越多被抓的几率越少这是不正常的，则逆向思维使用逃脱率*/</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(i=max;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(dp[i]&gt;=p)</span><br><span class="line">				&#123;</span><br><span class="line">					System.out.println(i);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			times--;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="矩阵相乘-Matrix-Power"><a href="#矩阵相乘-Matrix-Power" class="headerlink" title="矩阵相乘|Matrix Power"></a>矩阵相乘|Matrix Power</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 1050 </span></span><br><span class="line"><span class="comment">/* run this program using the console pauser or add your own getch, system("pause") or input loop */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> min(x,y) x&lt;y?x:y</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> M[MAX][MAX];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> mart[MAX];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> t;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i, j, k;</span><br><span class="line">	<span class="keyword">for</span> (j = <span class="number">2</span>; j &lt;= n; j++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (i = j - <span class="number">1</span>, M[i][i] = M[j][j] = <span class="number">0</span>; i&gt;<span class="number">0</span>; i--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (k = i; k&lt;j; k++)</span><br><span class="line">			&#123;</span><br><span class="line">				t = M[i][k] + M[k + <span class="number">1</span>][j] + mart[i - <span class="number">1</span>] * mart[k] * mart[j];</span><br><span class="line">					M[i][j] = <span class="built_in">min</span>(t, M[i][j]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(M, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(M));</span><br><span class="line">	<span class="keyword">int</span> i, n;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; mart[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">find</span>(n);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; M[<span class="number">1</span>][n];</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="深度搜索-Deep-Search"><a href="#深度搜索-Deep-Search" class="headerlink" title="深度搜索|Deep Search"></a>深度搜索|Deep Search</h3><h4 id="常规DFS-island-problem"><a href="#常规DFS-island-problem" class="headerlink" title="常规DFS(island problem)"></a>常规DFS(island problem)</h4><img src="https://raw.githubusercontent.com/SimonHu-HN/GoPic_Private/master/img/image-20201027165154352.png" alt="image-20201027165154352" style="zoom:80%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="keyword">char</span>[][] grid)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//边界条件判断</span></span><br><span class="line">    <span class="keyword">if</span> (grid == <span class="keyword">null</span> || grid.length == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//统计岛屿的个数</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//两个for循环遍历每一个格子</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">            <span class="comment">//只有当前格子是1才开始计算</span></span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] == <span class="string">'1'</span>) &#123;</span><br><span class="line">                <span class="comment">//如果当前格子是1，岛屿的数量加1</span></span><br><span class="line">                count++;</span><br><span class="line">                <span class="comment">//然后通过dfs把当前格子的上下左右4</span></span><br><span class="line">                <span class="comment">//个位置为1的都要置为0，因为他们是连着</span></span><br><span class="line">                <span class="comment">//一起的算一个岛屿，</span></span><br><span class="line">                dfs(grid, i, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">//最后返回岛屿的数量</span></span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个方法会把当前格子以及他邻近的为1的格子都会置为1</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span>[][] grid, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//边界条件判断，不能越界</span></span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= grid.length || j &lt; <span class="number">0</span> || j &gt;= grid[<span class="number">0</span>].length || grid[i][j] == <span class="string">'0'</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//把当前格子置为0，然后再从他的上下左右4个方向继续遍历</span></span><br><span class="line">    grid[i][j] = <span class="string">'0'</span>;</span><br><span class="line">    dfs(grid, i - <span class="number">1</span>, j); <span class="comment">//上</span></span><br><span class="line">    dfs(grid, i + <span class="number">1</span>, j); <span class="comment">//下</span></span><br><span class="line">    dfs(grid, i, j + <span class="number">1</span>); <span class="comment">//左</span></span><br><span class="line">    dfs(grid, i, j - <span class="number">1</span>); <span class="comment">//右</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="DFS-剪枝"><a href="#DFS-剪枝" class="headerlink" title="DFS+剪枝"></a>DFS+剪枝</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> sum;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> flag=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> max = -<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> min = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> arr[];</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> vis[];</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> nowlen, <span class="keyword">int</span> target, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(flag==<span class="number">1</span>)<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">if</span>(count==n) &#123;flag=<span class="number">1</span>;<span class="keyword">return</span>;&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=pos;i&lt;=n;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(!vis[i]&amp;&amp;nowlen+arr[i]&lt;=target)</span><br><span class="line">			&#123;</span><br><span class="line">				vis[i]=<span class="keyword">true</span>;</span><br><span class="line">				<span class="keyword">if</span>(nowlen+arr[i]==target)</span><br><span class="line">					dfs(<span class="number">1</span>, <span class="number">0</span>, target, count+<span class="number">1</span>);</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					dfs(i+<span class="number">1</span>, nowlen+arr[i], target, count+<span class="number">1</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				vis[i]=<span class="keyword">false</span>;</span><br><span class="line">				<span class="keyword">if</span>(flag==<span class="number">1</span>)<span class="keyword">return</span>;<span class="comment">//找到就返回</span></span><br><span class="line">				<span class="keyword">if</span>(nowlen==<span class="number">0</span>)<span class="keyword">return</span>;<span class="comment">//因为起点是从nowlen=0，所以一开始的dfs才开始选用第一根木棍，如果前面的flag没满足，则</span></span><br><span class="line">									<span class="comment">//则证明选用了第一根但是发现第一根没有用得上，说明这个target是不可能成立的，因为有一根没用</span></span><br><span class="line">									<span class="comment">//所以直接返回，寻找下一个target</span></span><br><span class="line">				<span class="keyword">while</span>(i&lt;n&amp;&amp;arr[i]==arr[i+<span class="number">1</span>])i++;</span><br><span class="line">				<span class="comment">/*如果存在某些nowlen并不是为0，即为正在拼凑的过程中，前面的已拼凑的加上这一根没有满足，则说明跟这一个</span></span><br><span class="line"><span class="comment">				木棍相同的木棍肯定也在这个序列中无法被选中，也不用再去DFS了</span></span><br><span class="line"><span class="comment">				*/</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Scanner in = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> BufferedInputStream(System.in));</span><br><span class="line">		<span class="keyword">while</span> (in.hasNext()) &#123;</span><br><span class="line">			<span class="keyword">int</span> i, j;</span><br><span class="line">			sum=<span class="number">0</span>;</span><br><span class="line">			n = in.nextInt();</span><br><span class="line">			<span class="keyword">if</span> (n == <span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			arr = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">			vis = <span class="keyword">new</span> <span class="keyword">boolean</span>[n + <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">				arr[i] = in.nextInt();</span><br><span class="line">				sum += arr[i];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">				<span class="keyword">int</span> k = i;</span><br><span class="line">				<span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">					<span class="keyword">if</span> (arr[j] &gt; arr[i])</span><br><span class="line">						k = j;</span><br><span class="line">				<span class="keyword">if</span> (k != i) &#123;</span><br><span class="line">					arr[k] ^= arr[i];</span><br><span class="line">					arr[i] ^= arr[k];</span><br><span class="line">					arr[k] ^= arr[i];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			max = arr[<span class="number">1</span>];</span><br><span class="line">			<span class="keyword">int</span> temp = max;</span><br><span class="line">			<span class="keyword">while</span> (temp &lt;= sum) &#123;</span><br><span class="line">				<span class="keyword">if</span> (temp == sum)</span><br><span class="line">					&#123;System.out.println(sum);<span class="keyword">break</span>;&#125;</span><br><span class="line">				<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">while</span> (sum % temp != <span class="number">0</span>) &#123;<span class="comment">//剪枝1，target必须可以被Sum整除</span></span><br><span class="line">						temp++;</span><br><span class="line">					&#125;</span><br><span class="line">					flag=<span class="number">0</span>;</span><br><span class="line">					dfs(<span class="number">1</span>, <span class="number">0</span>, temp, <span class="number">0</span>);</span><br><span class="line">					<span class="keyword">if</span>(flag==<span class="number">1</span>)</span><br><span class="line">						&#123;System.out.println(temp);<span class="keyword">break</span>;&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				temp++;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Dijkstra-DFS"><a href="#Dijkstra-DFS" class="headerlink" title="Dijkstra+DFS"></a>Dijkstra+DFS</h4><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1142" target="_blank" rel="noopener">例题|Example</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*小记:在第二个vis[j]的问题上，由于DJ算法是取未取过的，最小的距离值。所以求原点到某个点的距离的时候</span></span><br><span class="line"><span class="comment">如果一开始他们之间的直接距离就是最小的话，那么之后在经过各种别的点的出度到达当前点的距离肯定不会有直接</span></span><br><span class="line"><span class="comment">的这个距离大。所以也就没必要更新，（因为距离不可能为0），而如果距离大的话，那么这个点到最后才会更新。</span></span><br><span class="line"><span class="comment">也可以保证跟之前很多点比较之后最后的取值会是最小值*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> dp[];</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> dis[];</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> vis[];</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> map[][];</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> vsum,road;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;<span class="comment">//3f最好，0x7fffffff太大了，不适合DJ算法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> N=<span class="number">1010</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dj</span><span class="params">(<span class="keyword">int</span> start)</span><span class="comment">//地杰斯特拉</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i,j,k=<span class="number">0</span>;</span><br><span class="line">        Arrays.fill(vis, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=vsum;i++)</span><br><span class="line">            dis[i]=map[start][i];</span><br><span class="line">        dis[start]=<span class="number">0</span>;</span><br><span class="line">        vis[start]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=vsum;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> temp=INF;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=vsum;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(vis[j]!=<span class="number">1</span>&amp;&amp;dis[j]&lt;temp)</span><br><span class="line">                    temp=dis[k=j];<span class="comment">//这里就是取最小的值，千万不能加Break；</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(temp==INF) <span class="keyword">break</span>;</span><br><span class="line">            vis[k]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=vsum;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(vis[j]!=<span class="number">1</span>&amp;&amp;dis[j]&gt;dis[k]+map[k][j])<span class="comment">//这里的vis[j]!=1是为了剪枝，因为已经被vis过的顶点</span></span><br><span class="line">						      <span class="comment">//根据算法的巧妙性，之后要是还有其他出度关系到该点	</span></span><br><span class="line">					<span class="comment">//，那么他的距离一定比已经vis过的所记录的值要大，也就没必要更新</span></span><br><span class="line"></span><br><span class="line">                    dis[j]=dis[k]+map[k][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(v==<span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(dp[v]!=-<span class="number">1</span>) <span class="keyword">return</span> dp[v];</span><br><span class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=vsum;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(map[v][i]!=INF&amp;&amp;dis[v]&gt;dis[i])</span><br><span class="line">                sum+=dfs(i);</span><br><span class="line">        &#125;</span><br><span class="line">        dp[v]=sum;</span><br><span class="line">        <span class="keyword">return</span> dp[v];</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        Scanner in=<span class="keyword">new</span> Scanner(<span class="keyword">new</span> BufferedInputStream(System.in));</span><br><span class="line">        <span class="keyword">while</span>(in.hasNext())</span><br><span class="line">        &#123;</span><br><span class="line">            vsum=in.nextInt();</span><br><span class="line">            <span class="keyword">if</span>(vsum==<span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line">            road=in.nextInt();</span><br><span class="line">            dis=<span class="keyword">new</span> <span class="keyword">int</span>[vsum+<span class="number">1</span>];</span><br><span class="line">            dp=<span class="keyword">new</span> <span class="keyword">int</span>[vsum+<span class="number">1</span>];</span><br><span class="line">            vis=<span class="keyword">new</span> <span class="keyword">int</span>[vsum+<span class="number">1</span>];</span><br><span class="line">            map=<span class="keyword">new</span> <span class="keyword">int</span>[vsum+<span class="number">1</span>][vsum+<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> i,j;</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=vsum;i++)</span><br><span class="line">                <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=vsum;j++)</span><br><span class="line">                    map[i][j]=(i==j?<span class="number">0</span>:INF);</span><br><span class="line">            Arrays.fill(dp,-<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">int</span> u,v,w;</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=road;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                u=in.nextInt();v=in.nextInt();w=in.nextInt();</span><br><span class="line">                 </span><br><span class="line">                map[u][v]=w;map[v][u]=w;</span><br><span class="line">            &#125;</span><br><span class="line">            dj(<span class="number">2</span>);</span><br><span class="line">            System.out.println(dfs(<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Bellman-Ford-DFS"><a href="#Bellman-Ford-DFS" class="headerlink" title="Bellman-Ford+DFS"></a>Bellman-Ford+DFS</h4><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1142" target="_blank" rel="noopener">例题|Example</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> dp[];</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> dis[];</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span>[] inq;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> map[][];</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> vsum, road;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Queue&lt;Integer&gt; que = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> start)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> i;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= vsum; i++)</span><br><span class="line">			dis[i] = INF;</span><br><span class="line">		que.offer(start);</span><br><span class="line">		dis[start] = <span class="number">0</span>;</span><br><span class="line">		inq[start] = <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">			<span class="keyword">int</span> k=que.poll();</span><br><span class="line">			inq[k]=<span class="keyword">false</span>;</span><br><span class="line">			<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= vsum; i++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(dis[i]&gt;dis[k]+map[k][i])&#123;</span><br><span class="line">					dis[i]=dis[k]+map[k][i];</span><br><span class="line">					<span class="keyword">if</span>(!inq[i])</span><br><span class="line">					&#123;</span><br><span class="line">						que.offer(i);</span><br><span class="line">						inq[i]=<span class="keyword">true</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (v == <span class="number">2</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span> (dp[v] != -<span class="number">1</span>)</span><br><span class="line">			<span class="keyword">return</span> dp[v];</span><br><span class="line">		<span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= vsum; i++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (map[v][i] != INF &amp;&amp; dis[v] &gt; dis[i])</span><br><span class="line">				sum += dfs(i);</span><br><span class="line">		&#125;</span><br><span class="line">		dp[v] = sum;</span><br><span class="line">		<span class="keyword">return</span> dp[v];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Scanner in = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> BufferedInputStream(System.in));</span><br><span class="line">		<span class="keyword">while</span> (in.hasNext()) &#123;</span><br><span class="line">			vsum = in.nextInt();</span><br><span class="line">			<span class="keyword">if</span> (vsum == <span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			road = in.nextInt();</span><br><span class="line">			dis = <span class="keyword">new</span> <span class="keyword">int</span>[vsum + <span class="number">1</span>];</span><br><span class="line">			dp = <span class="keyword">new</span> <span class="keyword">int</span>[vsum + <span class="number">1</span>];</span><br><span class="line">			inq = <span class="keyword">new</span> <span class="keyword">boolean</span>[vsum + <span class="number">1</span>];</span><br><span class="line">			map = <span class="keyword">new</span> <span class="keyword">int</span>[vsum + <span class="number">1</span>][vsum + <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">int</span> i, j;</span><br><span class="line">			<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= vsum; i++)</span><br><span class="line">				<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= vsum; j++)</span><br><span class="line">					map[i][j] = (i == j ? <span class="number">0</span> : INF);</span><br><span class="line">			Arrays.fill(dp, -<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">int</span> u, v, w;</span><br><span class="line">			<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= road; i++) &#123;</span><br><span class="line">				u = in.nextInt();</span><br><span class="line">				v = in.nextInt();</span><br><span class="line">				w = in.nextInt();</span><br><span class="line"></span><br><span class="line">				map[u][v] = w;</span><br><span class="line">				map[v][u] = w;</span><br><span class="line">			&#125;</span><br><span class="line">			spfa(<span class="number">2</span>);</span><br><span class="line">			System.out.println(dfs(<span class="number">1</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="DP-DFS"><a href="#DP-DFS" class="headerlink" title="DP+DFS"></a>DP+DFS</h4><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1078" target="_blank" rel="noopener">例题|Example</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> location[] =<span class="keyword">new</span> <span class="keyword">int</span> [<span class="number">4</span>];</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> dir[][] =&#123;&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> map[][];</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> sum[][];</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> dp[][];</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> flag;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> n,k;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(dp[x][y]!=<span class="number">0</span>) <span class="keyword">return</span> dp[x][y];</span><br><span class="line">		<span class="keyword">int</span> i,j,xx,yy,l=<span class="number">0</span>,temp;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=k;j++)<span class="comment">//最多走多少步 </span></span><br><span class="line">			&#123;</span><br><span class="line">				xx=x+dir[i][<span class="number">0</span>]*j;</span><br><span class="line">				yy=y+dir[i][<span class="number">1</span>]*j;</span><br><span class="line">				<span class="keyword">if</span>(xx&gt;n||xx&lt;<span class="number">1</span>||yy&gt;n||yy&lt;<span class="number">1</span>)<span class="keyword">continue</span>;</span><br><span class="line">				<span class="keyword">if</span>(map[x][y]&lt;map[xx][yy])&#123;</span><br><span class="line">				temp=dfs(xx, yy);</span><br><span class="line">				l=Math.max(l,temp);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		dp[x][y]=l+map[x][y];</span><br><span class="line">		<span class="keyword">return</span> dp[x][y];</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		</span><br><span class="line">		Scanner in = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> BufferedInputStream(System.in));</span><br><span class="line">		<span class="keyword">while</span>(in.hasNext())</span><br><span class="line">		&#123;</span><br><span class="line">			 <span class="keyword">int</span> i,j;</span><br><span class="line">			 n=in.nextInt();</span><br><span class="line">			 k=in.nextInt();</span><br><span class="line">			 <span class="keyword">if</span>(n==-<span class="number">1</span>&amp;&amp;k==-<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">			 map=<span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">			 dp=<span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">			 <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">				<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">					map[i][j]=in.nextInt();</span><br><span class="line">			 <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			 Arrays.fill(dp[i], <span class="number">0</span>);</span><br><span class="line">			 &#125;</span><br><span class="line">			 System.out.println(dfs(<span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="广度搜索-Breadth-First-Search"><a href="#广度搜索-Breadth-First-Search" class="headerlink" title="广度搜索|Breadth First Search"></a>广度搜索|Breadth First Search</h3><h4 id="常规BFS-island-problem"><a href="#常规BFS-island-problem" class="headerlink" title="常规BFS(island problem)"></a>常规BFS(island problem)</h4><img src="https://raw.githubusercontent.com/SimonHu-HN/GoPic_Private/master/img/image-20201027165154352.png" alt="image-20201027165154352" style="zoom: 80%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="keyword">char</span>[][] grid)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//边界条件判断</span></span><br><span class="line">    <span class="keyword">if</span> (grid == <span class="keyword">null</span> || grid.length == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//统计岛屿的个数</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//两个for循环遍历每一个格子</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">            <span class="comment">//只有当前格子是1才开始计算</span></span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] == <span class="string">'1'</span>) &#123;</span><br><span class="line">                <span class="comment">//如果当前格子是1，岛屿的数量加1</span></span><br><span class="line">                count++;</span><br><span class="line">                <span class="comment">//然后通过bfs把当前格子的上下左右4</span></span><br><span class="line">                <span class="comment">//个位置为1的都要置为0，因为他们是连着</span></span><br><span class="line">                <span class="comment">//一起的算一个岛屿，</span></span><br><span class="line">                bfs(grid, i, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">char</span>[][] grid, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//把当前格子先置为0</span></span><br><span class="line">    grid[x][y] = <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">int</span> n = grid.length;</span><br><span class="line">    <span class="keyword">int</span> m = grid[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">//使用队列，存储的是格子坐标转化的值</span></span><br><span class="line">    Queue &lt; Integer &gt; queue = <span class="keyword">new</span> LinkedList &lt; &gt; ();</span><br><span class="line">    <span class="comment">//我们知道平面坐标是两位数字，但队列中存储的是一位数字，</span></span><br><span class="line">    <span class="comment">//所以这里是把两位数字转化为一位数字</span></span><br><span class="line">    <span class="keyword">int</span> code = x * m + y;</span><br><span class="line">    <span class="comment">//坐标转化的值存放到队列中</span></span><br><span class="line">    queue.add(code);</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">//出队</span></span><br><span class="line">        code = queue.poll();</span><br><span class="line">        <span class="comment">//在反转成坐标值（i，j）</span></span><br><span class="line">        <span class="keyword">int</span> i = code / m;</span><br><span class="line">        <span class="keyword">int</span> j = code % m;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; grid[i - <span class="number">1</span>][j] == <span class="string">'1'</span>) &#123; <span class="comment">//上</span></span><br><span class="line">            <span class="comment">//如果上边格子为1，把它置为0，然后加入到队列中</span></span><br><span class="line">            <span class="comment">//下面同理</span></span><br><span class="line">            grid[i - <span class="number">1</span>][j] = <span class="string">'0'</span>;</span><br><span class="line">            queue.add((i - <span class="number">1</span>) * m + j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; n - <span class="number">1</span> &amp;&amp; grid[i + <span class="number">1</span>][j] == <span class="string">'1'</span>) &#123; <span class="comment">//下</span></span><br><span class="line">            grid[i + <span class="number">1</span>][j] = <span class="string">'0'</span>;</span><br><span class="line">            queue.add((i + <span class="number">1</span>) * m + j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &gt; <span class="number">0</span> &amp;&amp; grid[i][j - <span class="number">1</span>] == <span class="string">'1'</span>) &#123; <span class="comment">//左</span></span><br><span class="line">            grid[i][j - <span class="number">1</span>] = <span class="string">'0'</span>;</span><br><span class="line">            queue.add(i * m + j - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &lt; m - <span class="number">1</span> &amp;&amp; grid[i][j + <span class="number">1</span>] == <span class="string">'1'</span>) &#123; <span class="comment">//右</span></span><br><span class="line">            grid[i][j + <span class="number">1</span>] = <span class="string">'0'</span>;</span><br><span class="line">            queue.add(i * m + j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="并查集-Disjoint-Set-Union"><a href="#并查集-Disjoint-Set-Union" class="headerlink" title="并查集|Disjoint Set Union"></a>并查集|Disjoint Set Union</h3><h4 id="Find-Gang"><a href="#Find-Gang" class="headerlink" title="Find Gang"></a>Find Gang</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;  </span></span></span><br><span class="line"><span class="keyword">int</span> fa[<span class="number">1005</span>], e[<span class="number">1005</span>], n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UF_set</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		fa[i] = i;</span><br><span class="line">		e[i] = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x == fa[x] ? x : Find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> r1 = Find(a);</span><br><span class="line">	<span class="keyword">int</span> r2 = Find(b);</span><br><span class="line">	<span class="keyword">if</span> (r1 != r2)</span><br><span class="line">	&#123;</span><br><span class="line">		fa[r1] = r2;</span><br><span class="line">		<span class="comment">//合并时，若r2有敌人  </span></span><br><span class="line">		<span class="keyword">if</span> (e[r2] != <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//若r1也有敌人  </span></span><br><span class="line">			<span class="keyword">if</span> (e[r1] != <span class="number">0</span>)</span><br><span class="line">				<span class="comment">//则它们的敌人是朋友  </span></span><br><span class="line">				Union(e[r1], e[r2]);</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="comment">//否则，r2的敌人同时也是r1的敌人  </span></span><br><span class="line">				e[r1] = e[r2];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> s[<span class="number">2</span>];</span><br><span class="line">	<span class="keyword">int</span> m, x, y, cnt = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m);</span><br><span class="line">	UF_set();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%s %d %d"</span>, s, &amp;x, &amp;y);</span><br><span class="line">		<span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'F'</span>)</span><br><span class="line">			Union(x, y);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//找到x的祖先，和x同一帮派  </span></span><br><span class="line">			x = Find(x);</span><br><span class="line">			<span class="comment">//若其祖先没有敌人，则将y当作其敌人，其实就是将y当作这个帮派的敌人  </span></span><br><span class="line">			<span class="keyword">if</span> (e[x] == <span class="number">0</span>)</span><br><span class="line">				e[x] = y;</span><br><span class="line">			<span class="comment">//若其祖先有敌人，则敌人的敌人是朋友，将它的两个敌人合并  </span></span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				Union(e[x], y);</span><br><span class="line">			<span class="comment">//对y的操作和对x的雷同  </span></span><br><span class="line">			y = Find(y);</span><br><span class="line">			<span class="keyword">if</span> (e[y] == <span class="number">0</span>)</span><br><span class="line">				e[y] = x;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				Union(e[y], x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">if</span> (Find(i) == i)</span><br><span class="line">			cnt++;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Infection"><a href="#Infection" class="headerlink" title="Infection"></a>Infection</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 30005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[MAX],pre[MAX];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x!=pre[x])</span><br><span class="line"></span><br><span class="line">        <span class="comment">//找到其祖先节点 </span></span><br><span class="line">        pre[x] = <span class="built_in">find</span>(pre[x]);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//由父节点继续向上递归查询 ,并将其父节点变成找到的 </span></span><br><span class="line">    <span class="keyword">return</span> pre[x]; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//分别查询两点的祖先节点。 </span></span><br><span class="line">    <span class="keyword">int</span> prex = <span class="built_in">find</span>(x);</span><br><span class="line">    <span class="keyword">int</span> prey = <span class="built_in">find</span>(y);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果二者的祖先节点不一致，那么任意让二者中某一个认另一个为祖先，保证同集合。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(prex == prey)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">//应该是祖先节点进行组合。而不是当前节点！ </span></span><br><span class="line">    pre[prey] = prex;  </span><br><span class="line">    a[prex] += a[prey];     </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="keyword">int</span> k,x,y;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>&amp;&amp;m==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//先将自身作为祖先节点。 </span></span><br><span class="line">            pre[i] = i;  </span><br><span class="line">            a[i] = <span class="number">1</span>; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//给出集合每个集合人数，以及第一个人的编号 </span></span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;k,&amp;x);</span><br><span class="line">            k--;</span><br><span class="line">            <span class="keyword">while</span>(k--)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;y);</span><br><span class="line">                merge(x,y); </span><br><span class="line">            &#125;    </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,a[<span class="built_in">find</span>(<span class="number">0</span>)]);<span class="comment">//find(0)是为了找到0的根a[0的根]代表a下有多少人，这些人跟0同根则会感染</span></span><br><span class="line"></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Risk-degree"><a href="#Risk-degree" class="headerlink" title="Risk degree"></a>Risk degree</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mem(a,b) memset(a,b,sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100000+20</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 10007</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 1000000+10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> u[N], v[N], pre[N];</span><br><span class="line"><span class="keyword">int</span> n, m, a, b;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line">		pre[i] = i;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (x == pre[x])</span><br><span class="line">			<span class="keyword">return</span> x; <span class="keyword">else</span> &#123;</span><br><span class="line">		pre[x] = <span class="built_in">find</span>(pre[x]);</span><br><span class="line">		<span class="keyword">return</span> pre[x];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mix</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> fx = <span class="built_in">find</span>(x);</span><br><span class="line">	<span class="keyword">int</span> fy = <span class="built_in">find</span>(y);</span><br><span class="line">	<span class="keyword">if</span> (fx != fy) &#123;</span><br><span class="line">		pre[fx] = fy;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">judge</span><span class="params">()</span><span class="comment">//判断a和b是否相连 &#123;</span></span></span><br><span class="line"><span class="function">	<span class="keyword">int</span> fx </span>= <span class="built_in">find</span>(a), fy = <span class="built_in">find</span>(b);</span><br><span class="line">	<span class="keyword">if</span> (fx == fy)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	freopen(<span class="string">"input.txt"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">	<span class="comment">//初始化</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">	init();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;m; i++) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;u[i], &amp;v[i]);</span><br><span class="line">		mix(u[i], v[i]);</span><br><span class="line">		<span class="comment">//加入并查集</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">	<span class="keyword">if</span> (judge() == <span class="number">0</span>)<span class="comment">//如果这两个不连通直接输出-1 &#123;</span></span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)<span class="comment">//枚举每一个点 &#123;</span></span><br><span class="line">		<span class="keyword">if</span> (i == a || i == b)<span class="keyword">continue</span>;</span><br><span class="line">		<span class="comment">//不能是所要求的的这个点，要查询的两个点不能删去，不然肯定					      //不通</span></span><br><span class="line">		init();</span><br><span class="line">		<span class="comment">//重新初始化</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;m; j++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (u[j] == i || v[j] == i)<span class="comment">//去除这个点所在的边，去除后对整个图进行连接，如果</span></span><br><span class="line">			<span class="comment">//最后还能联通，即这两个点的根是同一个，就说明这个不						   //是关键点</span></span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">			mix(u[j], v[j]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> fx = <span class="built_in">find</span>(a), fy = <span class="built_in">find</span>(b);</span><br><span class="line">		<span class="keyword">if</span> (fx != fy)</span><br><span class="line">					sum++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; sum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="线段树-Interval-Tree"><a href="#线段树-Interval-Tree" class="headerlink" title="线段树|Interval Tree"></a>线段树|Interval Tree</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http://acm.hdu.edu.cn/showproblem.php?pid=1166</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 50000</span></span><br><span class="line"><span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">int</span> sum;</span><br><span class="line"><span class="comment">//记录总兵数</span></span><br><span class="line"><span class="keyword">int</span> num[MAX_N + <span class="number">1</span>] = &#123;</span><br><span class="line">	<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">;</span><br><span class="line"><span class="comment">//记录各个兵营的兵数</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>  <span class="title">node</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> left;</span><br><span class="line">	<span class="keyword">int</span> right;</span><br><span class="line">	<span class="keyword">int</span> data;</span><br><span class="line">	node* lchild;</span><br><span class="line">	node* rchild;</span><br><span class="line">	node() &#123;</span><br><span class="line">		left = right = data = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">Tree;</span><br><span class="line"><span class="function">Tree* <span class="title">CreateTree</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	Tree* r;</span><br><span class="line">	r = (Tree*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Tree));</span><br><span class="line">	r-&gt;left = a;</span><br><span class="line">	r-&gt;right = b;</span><br><span class="line">	<span class="keyword">if</span> (a == b) &#123;</span><br><span class="line">		r-&gt;data = num[a];</span><br><span class="line">		r-&gt;lchild = r-&gt;rchild = <span class="literal">NULL</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">int</span> mid = (a + b) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">		r-&gt;lchild = CreateTree(a, mid);</span><br><span class="line">		r-&gt;rchild = CreateTree(mid + <span class="number">1</span>, b);</span><br><span class="line">		r-&gt;data = r-&gt;lchild-&gt;data + r-&gt;rchild-&gt;data;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Tree* r, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (r-&gt;left == a &amp;&amp; r-&gt;right == a) &#123;</span><br><span class="line">		r-&gt;data += b;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> mid = (r-&gt;left + r-&gt;right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> (a &lt;= mid) &#123;</span><br><span class="line">		insert(r-&gt;lchild, a, b);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		insert(r-&gt;rchild, a, b);</span><br><span class="line">	&#125;</span><br><span class="line">	r-&gt;data += b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">(Tree* r, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (r-&gt;left == a &amp;&amp; r-&gt;right == b) &#123;</span><br><span class="line">		sum += r-&gt;data;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> mid = (r-&gt;left + r-&gt;right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> (b &lt;= mid) &#123;</span><br><span class="line">		<span class="built_in">find</span>(r-&gt;lchild, a, b);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (a&gt;mid) &#123;</span><br><span class="line">		<span class="built_in">find</span>(r-&gt;rchild, a, b);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">find</span>(r-&gt;lchild, a, mid);</span><br><span class="line">		<span class="built_in">find</span>(r-&gt;rchild, mid + <span class="number">1</span>, b);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t, n, x, y;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">int</span> ca = <span class="number">0</span>;</span><br><span class="line">	freopen(<span class="string">"input.txt"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</span><br><span class="line">	<span class="keyword">while</span> (t--) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case %d:\n"</span>, ++ca);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		Tree* T;</span><br><span class="line">		T = CreateTree(<span class="number">1</span>, n);</span><br><span class="line">		<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; str) &#123;</span><br><span class="line">			<span class="keyword">if</span> (str == <span class="string">"Query"</span>) &#123;</span><br><span class="line">				sum = <span class="number">0</span>;</span><br><span class="line">				<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">				<span class="built_in">find</span>(T, x, y);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (str == <span class="string">"Add"</span>) &#123;</span><br><span class="line">				<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">				insert(T, x, y);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (str == <span class="string">"Sub"</span>) &#123;</span><br><span class="line">				<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">				insert(T, x, -y);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


	  

	</div>

	
	<span id="/2020/10/27/%E7%AE%97%E6%B3%95%E9%A2%98cheat%20sheet/" class="leancloud-visitors view" data-flag-title="Alorithm Cheat Sheet|算法Cheat Sheet">
		<em class="post-meta-item-text"> Page View </em> <i class="leancloud-visitors-count"></i>
	</span>
	
	<div>
  	<center>

	<div class="pagination">

    
    
    <a href="/2020/10/29/Bypass the WALL/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> Prev</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2020/10/27/JavaScript-Code-Library/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>


    </center>
	</div>

	<!-- comment -->
	<!--
<section id="comment">
    <h2 class="title">Comments</h2>

    
</section>

-->
	
	</div> <!-- col-md-9/col-md-12 -->


	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta">

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2020-10-27
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/Algorithm/">Algorithm<span>4</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>
    <ul id="tags" class="tag_box list-unstyled collapse in">
	    
  <li><a href="/tags/笔记-备忘录/">笔记|备忘录<span>25</span></a></li>
    </ul>
	</div>
	

	<!-- toc -->
	<div class="meta-widget" id="tocstyle">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a>
	   <div id="toc" class="toc collapse in">
		   <span class="toc-title">Contents</span>
			<ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Alorithm-Cheat-Sheet-算法Cheat-Sheet"><span class="toc-article-text">Alorithm Cheat Sheet|算法Cheat Sheet</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#技巧-Tricks"><span class="toc-article-text">技巧|Tricks</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#素数表生成-Prime-number-table"><span class="toc-article-text">素数表生成|Prime number table</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#快速幂-Binary-Exponentiation"><span class="toc-article-text">快速幂|Binary Exponentiation</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#伪丑数-Pseudo-ugly-number"><span class="toc-article-text">伪丑数|Pseudo ugly number</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#相邻图形面积问题-Adjacent-Graphics-Area"><span class="toc-article-text">相邻图形面积问题|Adjacent Graphics Area</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#皇后问题-N-queen"><span class="toc-article-text">皇后问题|N-queen</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#矩阵快速幂-Matrix-fast-power"><span class="toc-article-text">矩阵快速幂|Matrix fast power</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#动态规划-Dynamic-Planning"><span class="toc-article-text">动态规划|Dynamic Planning</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#01背包-01-Pack"><span class="toc-article-text">01背包|01 Pack</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#多重背包-Multiple-Pack"><span class="toc-article-text">多重背包|Multiple Pack</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#速记-note"><span class="toc-article-text">速记|note</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#概率DP"><span class="toc-article-text">概率DP</span></a></li></ol></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#矩阵相乘-Matrix-Power"><span class="toc-article-text">矩阵相乘|Matrix Power</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#深度搜索-Deep-Search"><span class="toc-article-text">深度搜索|Deep Search</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#常规DFS-island-problem"><span class="toc-article-text">常规DFS(island problem)</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#DFS-剪枝"><span class="toc-article-text">DFS+剪枝</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Dijkstra-DFS"><span class="toc-article-text">Dijkstra+DFS</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Bellman-Ford-DFS"><span class="toc-article-text">Bellman-Ford+DFS</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#DP-DFS"><span class="toc-article-text">DP+DFS</span></a></li></ol></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#广度搜索-Breadth-First-Search"><span class="toc-article-text">广度搜索|Breadth First Search</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#常规BFS-island-problem"><span class="toc-article-text">常规BFS(island problem)</span></a></li></ol></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#并查集-Disjoint-Set-Union"><span class="toc-article-text">并查集|Disjoint Set Union</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Find-Gang"><span class="toc-article-text">Find Gang</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Infection"><span class="toc-article-text">Infection</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Risk-degree"><span class="toc-article-text">Risk degree</span></a></li></ol></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#线段树-Interval-Tree"><span class="toc-article-text">线段树|Interval Tree</span></a></li></ol></li></ol></li></ol>
		</div>
	
	</div>


    <hr>
</div><!-- col-md-3 -->




	</div>

	

</div><!-- row -->

<!--
 -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p class="footer_end">
  
  &copy; 2021 SimonHu's Blog
  
</p>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.js"></script>
<script>
  $(function() {
      $(".mypage img").lazyload(
      {effect: "fadeIn",
       placeholder:"https://raw.githubusercontent.com/SimonHu-HN/GoPic_Private/master/img/5-121204193Q9.gif",}
      );
  });
  </script> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">
  <span>⬆︎UP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
